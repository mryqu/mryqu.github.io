<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> 
    <title>Gradle构建ReactJS前端实践 - Mryqu&#39;s Notes</title>
    <meta name="keywords" content="mryqu,yandongqu,博客,程序员,架构师,笔记,技术,分享">
    
    <meta property="og:title" content="Gradle构建ReactJS前端实践">
    <meta property="og:site_name" content="Mryqu&#39;s Notes">
    <meta property="og:image" content="/img/author.jpg"> 
    <meta name="title" content="Gradle构建ReactJS前端实践 - Mryqu&#39;s Notes" />
    <meta name="description" content="mryqu | yandongqu | 博客 | 软件 | 架构 | 技术"> 
    
    <link rel="shortcut icon" href="/img/favicon.ico" />
    <link rel="apple-touch-icon" href="/img/apple-touch-icon.png" />
    <link rel="apple-touch-icon-precomposed" href="/img/apple-touch-icon.png" />
    <link href="/js/vendor/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />
    <link href="/js/vendor/fancybox/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />
    <link href="/css/main.css" rel="stylesheet" type="text/css" />
    <link href="/css/syntax.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
     fancybox: true, 
    motion: true
  };
</script>
</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
<div class="container one-collumn sidebar-position-left page-home  ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-meta  custom-logo ">

  <div class="custom-logo-site-title">
    <a href="https://mryqu.github.io/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Mryqu&#39;s Notes</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
    <ul id="menu" class="menu">
      
      
        <li class="menu-item ">
          <a href="/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="/tags/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="/categories/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-categories"></i> <br />分类
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="/post/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档
          </a>
        </li>
      
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger"> <i class="menu-item-icon fa fa-search fa-fw"></i> <br /> 搜索</a>
      </li>
    </ul>
    <div class="site-search">
      <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>

    </div>
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
<section id="posts" class="posts-expand">
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="https://mryqu.github.io/post/gradle%E6%9E%84%E5%BB%BAreactjs%E5%89%8D%E7%AB%AF%E5%AE%9E%E8%B7%B5/" itemprop="url">
        Gradle构建ReactJS前端实践
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2020-04-25">
    2020-04-25
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="/categories/%E5%89%8D%E7%AB%AF" itemprop="url" rel="index">
        <span itemprop="name">前端</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">3475 字 ~17分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    

<h3 id="frontend-maven-plugin-https-github-com-eirslett-frontend-maven-plugin-使用介绍"><a href="https://github.com/eirslett/frontend-maven-plugin">frontend-maven-plugin</a>使用介绍</h3>

<p>Spring指南里面有个示例<a href="https://spring.io/guides/tutorials/react-and-spring-data-rest/">React.js and Spring Data REST</a>，技术架构为：<br />
* 后端采用Spring Data Rest<br />
* 前端采用React.js<br />
* 构建工具为Maven</p>

<p>下面看一下其pom.xml构建前端的片段:</p>

<pre><code>&lt;plugin&gt;
	&lt;groupId&gt;com.github.eirslett&lt;/groupId&gt;
	&lt;artifactId&gt;frontend-maven-plugin&lt;/artifactId&gt;
	&lt;version&gt;1.6&lt;/version&gt;
	&lt;configuration&gt;
		&lt;installDirectory&gt;target&lt;/installDirectory&gt;
	&lt;/configuration&gt;
	&lt;executions&gt;
		&lt;execution&gt;
			&lt;id&gt;install node and npm&lt;/id&gt;
			&lt;goals&gt;
				&lt;goal&gt;install-node-and-npm&lt;/goal&gt;
			&lt;/goals&gt;
			&lt;configuration&gt;
				&lt;nodeVersion&gt;v10.11.0&lt;/nodeVersion&gt;
				&lt;npmVersion&gt;6.4.1&lt;/npmVersion&gt;
			&lt;/configuration&gt;
		&lt;/execution&gt;
		&lt;execution&gt;
			&lt;id&gt;npm install&lt;/id&gt;
			&lt;goals&gt;
				&lt;goal&gt;npm&lt;/goal&gt;
			&lt;/goals&gt;
			&lt;configuration&gt;
				&lt;arguments&gt;install&lt;/arguments&gt;
			&lt;/configuration&gt;
		&lt;/execution&gt;
		&lt;execution&gt;
			&lt;id&gt;webpack build&lt;/id&gt;
			&lt;goals&gt;
				&lt;goal&gt;webpack&lt;/goal&gt;
			&lt;/goals&gt;
		&lt;/execution&gt;
	&lt;/executions&gt;
&lt;/plugin&gt;
</code></pre>

<p><a href="https://github.com/eirslett/frontend-maven-plugin">frontend-maven-plugin</a>用于构建JavaScript部分：<br />
* install-node-and-npm命令将安装node.js及其包管理工具npm到target目录。 （这确保这些二进制文件不在源代码控制范围内并且能被clean命令清除）。<br />
* npm命令将执行使用参数install的npm二进制文件，它会安装定义在package.json内的模块。<br />
* webpack命令将执行webpack二进制文件，它会基于webpack.config.js打包所有JavaScript代码。</p>

<p>这些步骤依次运行，完成安装node.js、下载JavaScript模块、构建JS部分。</p>

<h3 id="备选gradle前端构建插件">备选Gradle前端构建插件</h3>

<p><a href="https://github.com/eirslett/frontend-maven-plugin">frontend-maven-plugin</a>是专用于Maven的插件，在Gradle上并没有直接对应的插件。<br />
我查找后，重点考察了下面两个插件：<br />
* <a href="https://github.com/Siouan/frontend-gradle-plugin">Frontend Gradle plugin</a><br />
* <a href="https://github.com/srs/gradle-node-plugin">Gradle Plugin for Node</a></p>

<h3 id="frontend-gradle-plugin-https-github-com-siouan-frontend-gradle-plugin-实践"><a href="https://github.com/Siouan/frontend-gradle-plugin">Frontend Gradle plugin</a>实践</h3>

<h4 id="代码修改">代码修改</h4>

<p>package.json稍作修改，在scripts里面添加build命令：</p>

<pre><code>  &quot;scripts&quot;: {
    &quot;build&quot;: &quot;webpack --config webpack.config.js -d&quot;,
    &quot;watch&quot;: &quot;webpack --watch -d&quot;
  }
</code></pre>

<p>build.gradle:</p>

<pre><code>plugins {
    id 'application'
    id 'org.siouan.frontend' version '2.0.0'
}

apply plugin: 'org.siouan.frontend'

frontend {
    // [OPTIONAL] Node version, used to build the URL to download the corresponding distribution, if the
    // 'nodeDistributionUrl' property is not set. By default, this property is 'null'
    nodeVersion = '10.15.3'

    // [OPTIONAL] Install directory where the distribution archive shall be exploded.
    nodeInstallDirectory = file(&quot;${project.buildDir}/nodejs&quot;)

    ////// SCRIPT SETTINGS //////
    // Name of NPM/Yarn scripts (see 'package.json' file) that shall be executed depending on this
    // plugin task. The values below are passed as arguments of the 'npm' or 'yarn' executables.
    // Under Linux-like O/S, white space characters ' ' in an argument value must be escaped with a
    // backslash character '\'. Under Windows O/S, the whole argument must be enclosed between
    // double-quotes. Example: assembleScript = 'run assemble single\ argument'

    assembleScript = 'run build'

    ////// GENERAL SETTINGS //////
    // [OPTIONAL] Location of the directory containing the 'package.json' file. By default, this
    // file is considered to be located in the project's directory, at the same level than this
    // 'build.gradle[.kts]' file. If the 'package.json' file is located in another directory, it is
    // recommended either to set up a Gradle multi-project build, or to set this property with the
    // appropriate directory. This directory being used as the working directory when running JS
    // scripts, consequently, the 'node_modules' directory would be created at this location after
    // the 'installFrontend' task is executed.

    // [OPTIONAL] Whether messages logged by the plugin in Gradle with INFO level shall be visible
    // whatever the active Gradle logging level is. This property allows to track the plugin
    // execution without activating Gradle INFO or DEBUG levels that may be too much verbose on a
    // global point of view. The plugin also logs some messages at lower levels, (e.g. debugging
    // data). The visibility of these messages does not depend on this property.
    verboseModeEnabled = true
}

clean.delete &lt;&lt; file('node_modules')
clean.delete &lt;&lt; file('src/main/resources/static/built')
</code></pre>

<h4 id="操作">操作</h4>

<p>查看构建需要执行的任务：</p>

<pre><code>C:\ws\HelloSpringDataRestReactjs&gt;gradle -m build
:HelloSpringDataRestReactjs:installNode SKIPPED
:HelloSpringDataRestReactjs:installYarn SKIPPED
:HelloSpringDataRestReactjs:installFrontend SKIPPED
:HelloSpringDataRestReactjs:assembleFrontend SKIPPED
:HelloSpringDataRestReactjs:compileJava SKIPPED
:HelloSpringDataRestReactjs:processResources SKIPPED
:HelloSpringDataRestReactjs:classes SKIPPED
:HelloSpringDataRestReactjs:bootJar SKIPPED
:HelloSpringDataRestReactjs:bootStartScripts SKIPPED
:HelloSpringDataRestReactjs:bootDistTar SKIPPED
:HelloSpringDataRestReactjs:bootDistZip SKIPPED
:HelloSpringDataRestReactjs:jar SKIPPED
:HelloSpringDataRestReactjs:startScripts SKIPPED
:HelloSpringDataRestReactjs:distTar SKIPPED
:HelloSpringDataRestReactjs:distZip SKIPPED
:HelloSpringDataRestReactjs:assemble SKIPPED
:HelloSpringDataRestReactjs:checkFrontend SKIPPED
:HelloSpringDataRestReactjs:compileTestJava SKIPPED
:HelloSpringDataRestReactjs:processTestResources SKIPPED
:HelloSpringDataRestReactjs:testClasses SKIPPED
:HelloSpringDataRestReactjs:test SKIPPED
:HelloSpringDataRestReactjs:check SKIPPED
:HelloSpringDataRestReactjs:build SKIPPED

BUILD SUCCESSFUL in 1s
</code></pre>

<p>构建：</p>

<pre><code>C:\ws\HelloSpringDataRestReactjs&gt;gradle build --info
Selected primary task 'build' from project :HelloSpringDataRestReactjs
Tasks to be executed: [task ':HelloSpringDataRestReactjs:installNode', task ':HelloSpringDataRestReactjs:installYarn', task ':HelloSpringDataRestReactjs:installFrontend', task ':HelloSpringDataRestReactjs:assembleFrontend', task ':HelloSpringDataRestReactjs:compileJava', task ':HelloSpringDataRestReactjs:processResources', task ':HelloSpringDataRestReactjs:classes', task ':HelloSpringDataRestReactjs:bootJar', task ':HelloSpringDataRestReactjs:bootStartScripts', task ':HelloSpringDataRestReactjs:bootDistTar', task ':HelloSpringDataRestReactjs:bootDistZip', task ':HelloSpringDataRestReactjs:jar', task ':HelloSpringDataRestReactjs:startScripts', task ':HelloSpringDataRestReactjs:distTar', task ':HelloSpringDataRestReactjs:distZip', task ':HelloSpringDataRestReactjs:assemble', task ':HelloSpringDataRestReactjs:checkFrontend', task ':HelloSpringDataRestReactjs:compileTestJava', task ':HelloSpringDataRestReactjs:processTestResources', task ':HelloSpringDataRestReactjs:testClasses', task ':HelloSpringDataRestReactjs:test', task ':HelloSpringDataRestReactjs:check', task ':HelloSpringDataRestReactjs:build']
:HelloSpringDataRestReactjs:installNode (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:installNode
Caching disabled for task ':HelloSpringDataRestReactjs:installNode' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:installNode' is not up-to-date because:
  Output property 'nodeInstallDirectory' file  C:\ws\HelloSpringDataRestReactjs\build\nodejs has been removed.
  Output property 'nodeInstallDirectory' file  C:\ws\HelloSpringDataRestReactjs\build\nodejs\CHANGELOG.md has been removed.
  Output property 'nodeInstallDirectory' file  C:\ws\HelloSpringDataRestReactjs\build\nodejs\LICENSE has been removed.
[installNode] Removing install directory ' C:\ws\HelloSpringDataRestReactjs\build\nodejs'
[installNode] Downloading distribution at 'https://nodejs.org/dist/v10.15.3/node-v10.15.3-win-x64.zip'
[installNode] Downloading shasums at 'https://nodejs.org/dist/v10.15.3/SHASUMS256.txt'
[installNode] Verifying distribution integrity
[installNode] Exploding distribution into ' C:\ws\HelloSpringDataRestReactjs\build\tmp\installNode\extract'
[installNode] Moving distribution into ' C:\ws\HelloSpringDataRestReactjs\build\nodejs'
[installNode] Removing explode directory ' C:\ws\HelloSpringDataRestReactjs\build\tmp\installNode\extract'
[installNode] Removing distribution file ' C:\ws\HelloSpringDataRestReactjs\build\tmp\installNode\node-v10.15.3-win-x64.zip'
[installNode] Distribution installed in ' C:\ws\HelloSpringDataRestReactjs\build\nodejs'
:HelloSpringDataRestReactjs:installNode (Thread[Execution worker for ':',5,main]) completed. Took 1 mins 0.902 secs.
:HelloSpringDataRestReactjs:installYarn (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:installYarn SKIPPED
Skipping task ':HelloSpringDataRestReactjs:installYarn' as task onlyIf is false.
:HelloSpringDataRestReactjs:installYarn (Thread[Execution worker for ':',5,main]) completed. Took 0.0 secs.
:HelloSpringDataRestReactjs:installFrontend (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:installFrontend
Caching disabled for task ':HelloSpringDataRestReactjs:installFrontend' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:installFrontend' is not up-to-date because:
  Task has not declared any outputs despite executing actions.
[installFrontend] Running 'cmd' with arguments: [/c], [&quot; C:\ws\HelloSpringDataRestReactjs\build\nodejs\npm.cmd&quot; install]
Starting process 'command 'cmd''. Working directory:  C:\ws\HelloSpringDataRestReactjs Command: cmd /c &quot; C:\ws\HelloSpringDataRestReactjs\build\nodejs\npm.cmd&quot; install
Successfully started process 'command 'cmd''
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.12 (node_modules\fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.12: wanted {&quot;os&quot;:&quot;darwin&quot;,&quot;arch&quot;:&quot;any&quot;} (current: {&quot;os&quot;:&quot;win32&quot;,&quot;arch&quot;:&quot;x64&quot;})

added 543 packages from 245 contributors in 15.172s
:HelloSpringDataRestReactjs:installFrontend (Thread[Execution worker for ':',5,main]) completed. Took 16.825 secs.
:HelloSpringDataRestReactjs:assembleFrontend (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:assembleFrontend
Caching disabled for task ':HelloSpringDataRestReactjs:assembleFrontend' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:assembleFrontend' is not up-to-date because:
  Task has not declared any outputs despite executing actions.
[assembleFrontend] Running 'cmd' with arguments: [/c], [&quot; C:\ws\HelloSpringDataRestReactjs\build\nodejs\npm.cmd&quot; run build]
Starting process 'command 'cmd''. Working directory:  C:\ws\HelloSpringDataRestReactjs Command: cmd /c &quot; C:\ws\HelloSpringDataRestReactjs\build\nodejs\npm.cmd&quot; run build
Successfully started process 'command 'cmd''

&gt; spring-data-rest-and-reactjs@0.1.0 build  C:\ws\HelloSpringDataRestReactjs
&gt; webpack --config webpack.config.js -d

Hash: a2e26d521660d96c361d
Version: webpack 4.43.0
Time: 1501ms
Built at: 2020-04-25 09:50:55
                                      Asset      Size  Chunks             Chunk Names
./src/main/resources/static/built/bundle.js  2.58 MiB    main  [emitted]  main
Entrypoint main = ./src/main/resources/static/built/bundle.js
[./src/main/js/api/uriListConverter.js] 614 bytes {main} [built]
[./src/main/js/api/uriTemplateInterceptor.js] 497 bytes {main} [built]
[./src/main/js/app.js] 5.7 KiB {main} [built]
[./src/main/js/client.js] 712 bytes {main} [built]
    + 37 hidden modules
:HelloSpringDataRestReactjs:assembleFrontend (Thread[Execution worker for ':',5,main]) completed. Took 3.545 secs.
:HelloSpringDataRestReactjs:compileJava (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:compileJava
Resolving global dependency management for project 'HelloSpringDataRestReactjs'
Excluding [org.apache.tomcat:tomcat-annotations-api, ognl:ognl]
Excluding []
Caching disabled for task ':HelloSpringDataRestReactjs:compileJava' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:compileJava' is not up-to-date because:
  Output property 'destinationDir' file  C:\ws\HelloSpringDataRestReactjs\build\classes\java\main has been removed.
  Output property 'destinationDir' file  C:\ws\HelloSpringDataRestReactjs\build\classes\java\main\com has been removed.
  Output property 'destinationDir' file  C:\ws\HelloSpringDataRestReactjs\build\classes\java\main\com\yqu has been removed.
All input files are considered out-of-date for incremental task ':HelloSpringDataRestReactjs:compileJava'.
Full recompilation is required because no incremental change information is available. This is usually caused by clean builds or changing compiler arguments.
Compiling with JDK Java compiler API.
Created classpath snapshot for incremental compilation in 0.073 secs. 1 duplicate classes found in classpath (see all with --debug).
:HelloSpringDataRestReactjs:compileJava (Thread[Execution worker for ':',5,main]) completed. Took 1.305 secs.
:HelloSpringDataRestReactjs:processResources (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:processResources
Caching disabled for task ':HelloSpringDataRestReactjs:processResources' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:processResources' is not up-to-date because:
  Output property 'destinationDir' file  C:\ws\HelloSpringDataRestReactjs\build\resources\main has been removed.
  Output property 'destinationDir' file  C:\ws\HelloSpringDataRestReactjs\build\resources\main\application.properties has been removed.
  Output property 'destinationDir' file  C:\ws\HelloSpringDataRestReactjs\build\resources\main\static has been removed.
:HelloSpringDataRestReactjs:processResources (Thread[Execution worker for ':',5,main]) completed. Took 0.061 secs.
:HelloSpringDataRestReactjs:classes (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:classes
Skipping task ':HelloSpringDataRestReactjs:classes' as it has no actions.
:HelloSpringDataRestReactjs:classes (Thread[Execution worker for ':',5,main]) completed. Took 0.0 secs.
:HelloSpringDataRestReactjs:bootJar (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:bootJar
Excluding []
Caching disabled for task ':HelloSpringDataRestReactjs:bootJar' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:bootJar' is not up-to-date because:
  Output property 'archiveFile' file  C:\ws\HelloSpringDataRestReactjs\build\libs\HelloSpringDataRestReactjs.jar has been removed.
:HelloSpringDataRestReactjs:bootJar (Thread[Execution worker for ':',5,main]) completed. Took 0.686 secs.
:HelloSpringDataRestReactjs:bootStartScripts (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:bootStartScripts
Caching disabled for task ':HelloSpringDataRestReactjs:bootStartScripts' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:bootStartScripts' is not up-to-date because:
  Output property 'outputDir' file  C:\ws\HelloSpringDataRestReactjs\build\bootScripts has been removed.
  Output property 'outputDir' file  C:\ws\HelloSpringDataRestReactjs\build\bootScripts\HelloSpringDataRestReactjs has been removed.
  Output property 'outputDir' file  C:\ws\HelloSpringDataRestReactjs\build\bootScripts\HelloSpringDataRestReactjs.bat has been removed.
:HelloSpringDataRestReactjs:bootStartScripts (Thread[Execution worker for ':',5,main]) completed. Took 0.183 secs.
:HelloSpringDataRestReactjs:bootDistTar (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:bootDistTar
Caching disabled for task ':HelloSpringDataRestReactjs:bootDistTar' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:bootDistTar' is not up-to-date because:
  Output property 'archiveFile' file  C:\ws\HelloSpringDataRestReactjs\build\distributions\HelloSpringDataRestReactjs-boot.tar has been removed.
:HelloSpringDataRestReactjs:bootDistTar (Thread[Execution worker for ':',5,main]) completed. Took 0.209 secs.
:HelloSpringDataRestReactjs:bootDistZip (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:bootDistZip
Caching disabled for task ':HelloSpringDataRestReactjs:bootDistZip' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:bootDistZip' is not up-to-date because:
  Output property 'archiveFile' file  C:\ws\HelloSpringDataRestReactjs\build\distributions\HelloSpringDataRestReactjs-boot.zip has been removed.
:HelloSpringDataRestReactjs:bootDistZip (Thread[Execution worker for ':',5,main]) completed. Took 1.351 secs.
:HelloSpringDataRestReactjs:jar (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:jar SKIPPED
Skipping task ':HelloSpringDataRestReactjs:jar' as task onlyIf is false.
:HelloSpringDataRestReactjs:jar (Thread[Execution worker for ':',5,main]) completed. Took 0.0 secs.
:HelloSpringDataRestReactjs:startScripts (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:startScripts
Caching disabled for task ':HelloSpringDataRestReactjs:startScripts' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:startScripts' is not up-to-date because:
  Output property 'outputDir' file  C:\ws\HelloSpringDataRestReactjs\build\scripts has been removed.
  Output property 'outputDir' file  C:\ws\HelloSpringDataRestReactjs\build\scripts\HelloSpringDataRestReactjs has been removed.
  Output property 'outputDir' file  C:\ws\HelloSpringDataRestReactjs\build\scripts\HelloSpringDataRestReactjs.bat has been removed.
:HelloSpringDataRestReactjs:startScripts (Thread[Execution worker for ':',5,main]) completed. Took 0.055 secs.
:HelloSpringDataRestReactjs:distTar (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:distTar
Caching disabled for task ':HelloSpringDataRestReactjs:distTar' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:distTar' is not up-to-date because:
  Output property 'archiveFile' file  C:\ws\HelloSpringDataRestReactjs\build\distributions\HelloSpringDataRestReactjs.tar has been removed.
:HelloSpringDataRestReactjs:distTar (Thread[Execution worker for ':',5,main]) completed. Took 0.235 secs.
:HelloSpringDataRestReactjs:distZip (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:distZip
Caching disabled for task ':HelloSpringDataRestReactjs:distZip' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:distZip' is not up-to-date because:
  Output property 'archiveFile' file  C:\ws\HelloSpringDataRestReactjs\build\distributions\HelloSpringDataRestReactjs.zip has been removed.
:HelloSpringDataRestReactjs:distZip (Thread[Execution worker for ':',5,main]) completed. Took 1.462 secs.
:HelloSpringDataRestReactjs:assemble (Thread[Execution worker for ':' Thread 3,5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:assemble
Skipping task ':HelloSpringDataRestReactjs:assemble' as it has no actions.
:HelloSpringDataRestReactjs:assemble (Thread[Execution worker for ':' Thread 3,5,main]) completed. Took 0.0 secs.
:HelloSpringDataRestReactjs:checkFrontend (Thread[Execution worker for ':' Thread 3,5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:checkFrontend SKIPPED
Skipping task ':HelloSpringDataRestReactjs:checkFrontend' as task onlyIf is false.
:HelloSpringDataRestReactjs:checkFrontend (Thread[Execution worker for ':' Thread 3,5,main]) completed. Took 0.0 secs.
:HelloSpringDataRestReactjs:compileTestJava (Thread[Execution worker for ':' Thread 3,5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:compileTestJava NO-SOURCE
file or directory ' C:\ws\HelloSpringDataRestReactjs\src\test\java', not found
Skipping task ':HelloSpringDataRestReactjs:compileTestJava' as it has no source files and no previous output files.
:HelloSpringDataRestReactjs:compileTestJava (Thread[Execution worker for ':' Thread 3,5,main]) completed. Took 0.002 secs.
:HelloSpringDataRestReactjs:processTestResources (Thread[Execution worker for ':' Thread 3,5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:processTestResources NO-SOURCE
file or directory ' C:\ws\HelloSpringDataRestReactjs\src\test\resources', not found
Skipping task ':HelloSpringDataRestReactjs:processTestResources' as it has no source files and no previous output files.
:HelloSpringDataRestReactjs:processTestResources (Thread[Execution worker for ':' Thread 3,5,main]) completed. Took 0.0 secs.
:HelloSpringDataRestReactjs:testClasses (Thread[Execution worker for ':' Thread 3,5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:testClasses UP-TO-DATE
Skipping task ':HelloSpringDataRestReactjs:testClasses' as it has no actions.
:HelloSpringDataRestReactjs:testClasses (Thread[Execution worker for ':' Thread 3,5,main]) completed. Took 0.0 secs.
:HelloSpringDataRestReactjs:test (Thread[Execution worker for ':' Thread 3,5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:test NO-SOURCE
Skipping task ':HelloSpringDataRestReactjs:test' as it has no source files and no previous output files.
:HelloSpringDataRestReactjs:test (Thread[Execution worker for ':' Thread 3,5,main]) completed. Took 0.001 secs.
:HelloSpringDataRestReactjs:check (Thread[Execution worker for ':' Thread 3,5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:check UP-TO-DATE
Skipping task ':HelloSpringDataRestReactjs:check' as it has no actions.
:HelloSpringDataRestReactjs:check (Thread[Execution worker for ':' Thread 3,5,main]) completed. Took 0.0 secs.
:HelloSpringDataRestReactjs:build (Thread[Execution worker for ':' Thread 3,5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:build
Skipping task ':HelloSpringDataRestReactjs:build' as it has no actions.
:HelloSpringDataRestReactjs:build (Thread[Execution worker for ':' Thread 3,5,main]) completed. Took 0.0 secs.

BUILD SUCCESSFUL in 1m 28s
12 actionable tasks: 12 executed
</code></pre>

<p>清除：</p>

<pre><code>C:\ws\HelloSpringDataRestReactjs&gt;gradle clean --info
Selected primary task 'clean' from project :HelloSpringDataRestReactjs
Tasks to be executed: [task ':HelloSpringDataRestReactjs:cleanFrontend', task ':HelloSpringDataRestReactjs:clean']
:HelloSpringDataRestReactjs:cleanFrontend (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:cleanFrontend SKIPPED
Skipping task ':HelloSpringDataRestReactjs:cleanFrontend' as task onlyIf is false.
:HelloSpringDataRestReactjs:cleanFrontend (Thread[Execution worker for ':',5,main]) completed. Took 0.005 secs.
:HelloSpringDataRestReactjs:clean (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:clean
Caching disabled for task ':HelloSpringDataRestReactjs:clean' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:clean' is not up-to-date because:
  Task has not declared any outputs despite executing actions.
:HelloSpringDataRestReactjs:clean (Thread[Execution worker for ':',5,main]) completed. Took 5.01 secs.

BUILD SUCCESSFUL in 6s
1 actionable task: 1 executed
</code></pre>

<h3 id="gradle-plugin-for-node-https-github-com-srs-gradle-node-plugin-实践"><a href="https://github.com/srs/gradle-node-plugin">Gradle Plugin for Node</a>实践</h3>

<h4 id="代码修改-1">代码修改</h4>

<p>build.gradle:</p>

<pre><code>plugins {
    id 'com.moowork.node' version '1.3.1'
}

apply plugin: 'com.moowork.node'


node {
    // Version of node to use.
    version = '10.15.3'

    // Version of npm to use.
    npmVersion = '6.4.1'

    // Base URL for fetching node distributions (change if you have a mirror).
    distBaseUrl = 'https://nodejs.org/dist'

    // If true, it will download node using above parameters.
    // If false, it will try to use globally installed node.
    download = true

    // Set the work directory for unpacking node
    workDir = file(&quot;${project.buildDir}/nodejs&quot;)

    // Set the work directory for NPM
    npmWorkDir = file(&quot;${project.buildDir}/npm&quot;)

    // Set the work directory where node_modules should be located
    nodeModulesDir = file(&quot;${project.projectDir}&quot;)
}


task buildReactApp(type: NodeTask, dependsOn: 'npmInstall') {
    script = project.file('node_modules/webpack/bin/webpack.js')
}

processResources.dependsOn 'buildReactApp'

clean.delete &lt;&lt; file('node_modules')
clean.delete &lt;&lt; file('src/main/resources/static/built')
</code></pre>

<h4 id="操作-1">操作</h4>

<p>查看构建需要执行的任务：</p>

<pre><code>C:\ws\HelloSpringDataRestReactjs&gt;gradle -m build
:HelloSpringDataRestReactjs:compileJava SKIPPED
:HelloSpringDataRestReactjs:nodeSetup SKIPPED
:HelloSpringDataRestReactjs:npmSetup SKIPPED
:HelloSpringDataRestReactjs:npmInstall SKIPPED
:HelloSpringDataRestReactjs:buildReactApp SKIPPED
:HelloSpringDataRestReactjs:processResources SKIPPED
:HelloSpringDataRestReactjs:classes SKIPPED
:HelloSpringDataRestReactjs:bootJar SKIPPED
:HelloSpringDataRestReactjs:bootStartScripts SKIPPED
:HelloSpringDataRestReactjs:bootDistTar SKIPPED
:HelloSpringDataRestReactjs:bootDistZip SKIPPED
:HelloSpringDataRestReactjs:jar SKIPPED
:HelloSpringDataRestReactjs:startScripts SKIPPED
:HelloSpringDataRestReactjs:distTar SKIPPED
:HelloSpringDataRestReactjs:distZip SKIPPED
:HelloSpringDataRestReactjs:assemble SKIPPED
:HelloSpringDataRestReactjs:compileTestJava SKIPPED
:HelloSpringDataRestReactjs:processTestResources SKIPPED
:HelloSpringDataRestReactjs:testClasses SKIPPED
:HelloSpringDataRestReactjs:test SKIPPED
:HelloSpringDataRestReactjs:check SKIPPED
:HelloSpringDataRestReactjs:build SKIPPED

BUILD SUCCESSFUL in 985ms
</code></pre>

<p>构建：</p>

<pre><code>Selected primary task 'build' from project :HelloSpringDataRestReactjs
Tasks to be executed: [task ':HelloSpringDataRestReactjs:compileJava', task ':HelloSpringDataRestReactjs:nodeSetup', task ':HelloSpringDataRestReactjs:npmSetup', task ':HelloSpringDataRestReactjs:npmInstall', task ':HelloSpringDataRestReactjs:buildReactApp', task ':HelloSpringDataRestReactjs:processResources', task ':HelloSpringDataRestReactjs:classes', task ':HelloSpringDataRestReactjs:bootJar', task ':HelloSpringDataRestReactjs:bootStartScripts', task ':HelloSpringDataRestReactjs:bootDistTar', task ':HelloSpringDataRestReactjs:bootDistZip', task ':HelloSpringDataRestReactjs:jar', task ':HelloSpringDataRestReactjs:startScripts', task ':HelloSpringDataRestReactjs:distTar', task ':HelloSpringDataRestReactjs:distZip', task ':HelloSpringDataRestReactjs:assemble', task ':HelloSpringDataRestReactjs:compileTestJava', task ':HelloSpringDataRestReactjs:processTestResources', task ':HelloSpringDataRestReactjs:testClasses', task ':HelloSpringDataRestReactjs:test', task ':HelloSpringDataRestReactjs:check', task ':HelloSpringDataRestReactjs:build']
:HelloSpringDataRestReactjs:compileJava (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:compileJava
Resolving global dependency management for project 'HelloSpringDataRestReactjs'
Excluding [org.apache.tomcat:tomcat-annotations-api, ognl:ognl]
Excluding []
Caching disabled for task ':HelloSpringDataRestReactjs:compileJava' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:compileJava' is not up-to-date because:
  Output property 'destinationDir' file  C:\ws\HelloSpringDataRestReactjs\build\classes\java\main has been removed.
  Output property 'destinationDir' file  C:\ws\HelloSpringDataRestReactjs\build\classes\java\main\com has been removed.
  Output property 'destinationDir' file  C:\ws\HelloSpringDataRestReactjs\build\classes\java\main\com\yqu has been removed.
All input files are considered out-of-date for incremental task ':HelloSpringDataRestReactjs:compileJava'.
Full recompilation is required because no incremental change information is available. This is usually caused by clean builds or changing compiler arguments.
Compiling with JDK Java compiler API.
Created classpath snapshot for incremental compilation in 0.002 secs. 1 duplicate classes found in classpath (see all with --debug).
:HelloSpringDataRestReactjs:compileJava (Thread[Execution worker for ':',5,main]) completed. Took 0.57 secs.
:HelloSpringDataRestReactjs:nodeSetup (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:nodeSetup
Caching disabled for task ':HelloSpringDataRestReactjs:nodeSetup' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:nodeSetup' is not up-to-date because:
  Output property 'nodeDir' file  C:\ws\HelloSpringDataRestReactjs\build\nodejs\node-v10.15.3-win-x64 has been removed.
  Output property 'nodeDir' file  C:\ws\HelloSpringDataRestReactjs\build\nodejs\node-v10.15.3-win-x64\CHANGELOG.md has been removed.
  Output property 'nodeDir' file  C:\ws\HelloSpringDataRestReactjs\build\nodejs\node-v10.15.3-win-x64\LICENSE has been removed.
:HelloSpringDataRestReactjs:nodeSetup (Thread[Execution worker for ':',5,main]) completed. Took 26.34 secs.
:HelloSpringDataRestReactjs:npmSetup (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:npmSetup
Caching disabled for task ':HelloSpringDataRestReactjs:npmSetup' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:npmSetup' is not up-to-date because:
  Output property 'npmDir' file  C:\ws\HelloSpringDataRestReactjs\build\npm\npm-v6.4.1 has been removed.
  Output property 'npmDir' file  C:\ws\HelloSpringDataRestReactjs\build\npm\npm-v6.4.1\node_modules has been removed.
  Output property 'npmDir' file  C:\ws\HelloSpringDataRestReactjs\build\npm\npm-v6.4.1\node_modules\npm has been removed.
Starting process 'command ' C:\ws\HelloSpringDataRestReactjs\build\nodejs\node-v10.15.3-win-x64\node.exe''. Working directory:  C:\ws\HelloSpringDataRestReactjs Command:  C:\ws\HelloSpringDataRestReactjs\build\nodejs\node-v10.15.3-win-x64\node.exe  C:\ws\HelloSpringDataRestReactjs\build\nodejs\node-v10.15.3-win-x64\node_modules\npm\bin\npm-cli.js install --global --no-save --prefix  C:\ws\HelloSpringDataRestReactjs\build\npm\npm-v6.4.1 npm@6.4.1
Successfully started process 'command ' C:\ws\HelloSpringDataRestReactjs\build\nodejs\node-v10.15.3-win-x64\node.exe''
 C:\ws\HelloSpringDataRestReactjs\build\npm\npm-v6.4.1\npx -&gt;  C:\ws\HelloSpringDataRestReactjs\build\npm\npm-v6.4.1\node_modules\npm\bin\npx-cli.js
 C:\ws\HelloSpringDataRestReactjs\build\npm\npm-v6.4.1\npm -&gt;  C:\ws\HelloSpringDataRestReactjs\build\npm\npm-v6.4.1\node_modules\npm\bin\npm-cli.js
+ npm@6.4.1
added 387 packages from 770 contributors in 16.644s
:HelloSpringDataRestReactjs:npmSetup (Thread[Execution worker for ':',5,main]) completed. Took 18.55 secs.
:HelloSpringDataRestReactjs:npmInstall (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:npmInstall
Caching disabled for task ':HelloSpringDataRestReactjs:npmInstall' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:npmInstall' is not up-to-date because:
  Output property '$1' file  C:\ws\HelloSpringDataRestReactjs\node_modules has been removed.
  Output property '$1' file  C:\ws\HelloSpringDataRestReactjs\node_modules\.bin has been removed.
  Output property '$1' file  C:\ws\HelloSpringDataRestReactjs\node_modules\.bin\acorn has been removed.
Starting process 'command ' C:\ws\HelloSpringDataRestReactjs\build\npm\npm-v6.4.1\npm.cmd''. Working directory:  C:\ws\HelloSpringDataRestReactjs Command:  C:\ws\HelloSpringDataRestReactjs\build\npm\npm-v6.4.1\npm.cmd install
Successfully started process 'command ' C:\ws\HelloSpringDataRestReactjs\build\npm\npm-v6.4.1\npm.cmd''
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.12 (node_modules\fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.12: wanted {&quot;os&quot;:&quot;darwin&quot;,&quot;arch&quot;:&quot;any&quot;} (current: {&quot;os&quot;:&quot;win32&quot;,&quot;arch&quot;:&quot;x64&quot;})

added 543 packages from 245 contributors in 15.314s
:HelloSpringDataRestReactjs:npmInstall (Thread[Execution worker for ':',5,main]) completed. Took 16.978 secs.
:HelloSpringDataRestReactjs:buildReactApp (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:buildReactApp
Caching disabled for task ':HelloSpringDataRestReactjs:buildReactApp' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:buildReactApp' is not up-to-date because:
  Task has not declared any outputs despite executing actions.
Starting process 'command ' C:\ws\HelloSpringDataRestReactjs\build\nodejs\node-v10.15.3-win-x64\node.exe''. Working directory:  C:\ws\HelloSpringDataRestReactjs Command:  C:\ws\HelloSpringDataRestReactjs\build\nodejs\node-v10.15.3-win-x64\node.exe  C:\ws\HelloSpringDataRestReactjs\node_modules\webpack\bin\webpack.js
Successfully started process 'command ' C:\ws\HelloSpringDataRestReactjs\build\nodejs\node-v10.15.3-win-x64\node.exe''
Hash: f1e3a07435d35106a59b
Version: webpack 4.43.0
Time: 1764ms
Built at: 2020-04-25 10:31:04
                                          Asset      Size  Chunks                   Chunk Names
./src/main/resources/static/built/bundle.js  1020 KiB    main  [emitted]        main
./src/main/resources/static/built/bundle.js.map  1.16 MiB    main  [emitted] [dev]  main
Entrypoint main = ./src/main/resources/static/built/bundle.js ./src/main/resources/static/built/bundle.js.map
[./src/main/js/api/uriListConverter.js] 614 bytes {main} [built]
[./src/main/js/api/uriTemplateInterceptor.js] 497 bytes {main} [built]
[./src/main/js/app.js] 5.7 KiB {main} [built]
[./src/main/js/client.js] 712 bytes {main} [built]
    + 37 hidden modules
:HelloSpringDataRestReactjs:buildReactApp (Thread[Execution worker for ':',5,main]) completed. Took 2.958 secs.
:HelloSpringDataRestReactjs:processResources (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:processResources
Caching disabled for task ':HelloSpringDataRestReactjs:processResources' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:processResources' is not up-to-date because:
  Output property 'destinationDir' file  C:\ws\HelloSpringDataRestReactjs\build\resources\main has been removed.
  Output property 'destinationDir' file  C:\ws\HelloSpringDataRestReactjs\build\resources\main\application.properties has been removed.
  Output property 'destinationDir' file  C:\ws\HelloSpringDataRestReactjs\build\resources\main\static has been removed.
:HelloSpringDataRestReactjs:processResources (Thread[Execution worker for ':',5,main]) completed. Took 0.155 secs.
:HelloSpringDataRestReactjs:classes (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:classes
Skipping task ':HelloSpringDataRestReactjs:classes' as it has no actions.
:HelloSpringDataRestReactjs:classes (Thread[Execution worker for ':',5,main]) completed. Took 0.0 secs.
:HelloSpringDataRestReactjs:bootJar (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:bootJar
Excluding []
Caching disabled for task ':HelloSpringDataRestReactjs:bootJar' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:bootJar' is not up-to-date because:
  Output property 'archiveFile' file  C:\ws\HelloSpringDataRestReactjs\build\libs\HelloSpringDataRestReactjs.jar has been removed.
:HelloSpringDataRestReactjs:bootJar (Thread[Execution worker for ':',5,main]) completed. Took 0.405 secs.
:HelloSpringDataRestReactjs:bootStartScripts (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:bootStartScripts
Caching disabled for task ':HelloSpringDataRestReactjs:bootStartScripts' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:bootStartScripts' is not up-to-date because:
  Output property 'outputDir' file  C:\ws\HelloSpringDataRestReactjs\build\bootScripts has been removed.
  Output property 'outputDir' file  C:\ws\HelloSpringDataRestReactjs\build\bootScripts\HelloSpringDataRestReactjs has been removed.
  Output property 'outputDir' file  C:\ws\HelloSpringDataRestReactjs\build\bootScripts\HelloSpringDataRestReactjs.bat has been removed.
:HelloSpringDataRestReactjs:bootStartScripts (Thread[Execution worker for ':',5,main]) completed. Took 0.031 secs.
:HelloSpringDataRestReactjs:bootDistTar (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:bootDistTar
Caching disabled for task ':HelloSpringDataRestReactjs:bootDistTar' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:bootDistTar' is not up-to-date because:
  Output property 'archiveFile' file  C:\ws\HelloSpringDataRestReactjs\build\distributions\HelloSpringDataRestReactjs-boot.tar has been removed.
:HelloSpringDataRestReactjs:bootDistTar (Thread[Execution worker for ':',5,main]) completed. Took 0.204 secs.
:HelloSpringDataRestReactjs:bootDistZip (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:bootDistZip
Caching disabled for task ':HelloSpringDataRestReactjs:bootDistZip' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:bootDistZip' is not up-to-date because:
  Output property 'archiveFile' file  C:\ws\HelloSpringDataRestReactjs\build\distributions\HelloSpringDataRestReactjs-boot.zip has been removed.
:HelloSpringDataRestReactjs:bootDistZip (Thread[Execution worker for ':',5,main]) completed. Took 1.345 secs.
:HelloSpringDataRestReactjs:jar (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:jar SKIPPED
Skipping task ':HelloSpringDataRestReactjs:jar' as task onlyIf is false.
:HelloSpringDataRestReactjs:jar (Thread[Execution worker for ':',5,main]) completed. Took 0.0 secs.
:HelloSpringDataRestReactjs:startScripts (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:startScripts
Caching disabled for task ':HelloSpringDataRestReactjs:startScripts' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:startScripts' is not up-to-date because:
  Output property 'outputDir' file  C:\ws\HelloSpringDataRestReactjs\build\scripts has been removed.
  Output property 'outputDir' file  C:\ws\HelloSpringDataRestReactjs\build\scripts\HelloSpringDataRestReactjs has been removed.
  Output property 'outputDir' file  C:\ws\HelloSpringDataRestReactjs\build\scripts\HelloSpringDataRestReactjs.bat has been removed.
:HelloSpringDataRestReactjs:startScripts (Thread[Execution worker for ':',5,main]) completed. Took 0.047 secs.
:HelloSpringDataRestReactjs:distTar (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:distTar
Caching disabled for task ':HelloSpringDataRestReactjs:distTar' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:distTar' is not up-to-date because:
  Output property 'archiveFile' file  C:\ws\HelloSpringDataRestReactjs\build\distributions\HelloSpringDataRestReactjs.tar has been removed.
:HelloSpringDataRestReactjs:distTar (Thread[Execution worker for ':',5,main]) completed. Took 0.23 secs.
:HelloSpringDataRestReactjs:distZip (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:distZip
Caching disabled for task ':HelloSpringDataRestReactjs:distZip' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:distZip' is not up-to-date because:
  Output property 'archiveFile' file  C:\ws\HelloSpringDataRestReactjs\build\distributions\HelloSpringDataRestReactjs.zip has been removed.
:HelloSpringDataRestReactjs:distZip (Thread[Execution worker for ':',5,main]) completed. Took 1.439 secs.
:HelloSpringDataRestReactjs:assemble (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:assemble
Skipping task ':HelloSpringDataRestReactjs:assemble' as it has no actions.
:HelloSpringDataRestReactjs:assemble (Thread[Execution worker for ':',5,main]) completed. Took 0.0 secs.
:HelloSpringDataRestReactjs:compileTestJava (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:compileTestJava NO-SOURCE
file or directory ' C:\ws\HelloSpringDataRestReactjs\src\test\java', not found
Skipping task ':HelloSpringDataRestReactjs:compileTestJava' as it has no source files and no previous output files.
:HelloSpringDataRestReactjs:compileTestJava (Thread[Execution worker for ':',5,main]) completed. Took 0.0 secs.
:HelloSpringDataRestReactjs:processTestResources (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:processTestResources NO-SOURCE
file or directory ' C:\ws\HelloSpringDataRestReactjs\src\test\resources', not found
Skipping task ':HelloSpringDataRestReactjs:processTestResources' as it has no source files and no previous output files.
:HelloSpringDataRestReactjs:processTestResources (Thread[Execution worker for ':',5,main]) completed. Took 0.0 secs.
:HelloSpringDataRestReactjs:testClasses (Thread[Execution worker for ':',5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:testClasses UP-TO-DATE
Skipping task ':HelloSpringDataRestReactjs:testClasses' as it has no actions.
:HelloSpringDataRestReactjs:testClasses (Thread[Execution worker for ':',5,main]) completed. Took 0.0 secs.
:HelloSpringDataRestReactjs:test (Thread[Execution worker for ':' Thread 9,5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:test NO-SOURCE
Skipping task ':HelloSpringDataRestReactjs:test' as it has no source files and no previous output files.
:HelloSpringDataRestReactjs:test (Thread[Execution worker for ':' Thread 9,5,main]) completed. Took 0.002 secs.
:HelloSpringDataRestReactjs:check (Thread[Execution worker for ':' Thread 9,5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:check UP-TO-DATE
Skipping task ':HelloSpringDataRestReactjs:check' as it has no actions.
:HelloSpringDataRestReactjs:check (Thread[Execution worker for ':' Thread 9,5,main]) completed. Took 0.0 secs.
:HelloSpringDataRestReactjs:build (Thread[Execution worker for ':' Thread 9,5,main]) started.

&gt; Task :HelloSpringDataRestReactjs:build
Skipping task ':HelloSpringDataRestReactjs:build' as it has no actions.
:HelloSpringDataRestReactjs:build (Thread[Execution worker for ':' Thread 9,5,main]) completed. Took 0.0 secs.

Deprecated Gradle features were used in this build, making it incompatible with Gradle 6.0.
Use '--warning-mode all' to show the individual deprecation warnings.
See https://docs.gradle.org/5.6/userguide/command_line_interface.html#sec:command_line_warnings

BUILD SUCCESSFUL in 1m 10s
</code></pre>

<p>清除：</p>

<pre><code>C:\ws\HelloSpringDataRestReactjs&gt;gradle clean --info
&gt; Task :HelloSpringDataRestReactjs:clean
Caching disabled for task ':HelloSpringDataRestReactjs:clean' because:
  Build cache is disabled
Task ':HelloSpringDataRestReactjs:clean' is not up-to-date because:
  Task has not declared any outputs despite executing actions.
:HelloSpringDataRestReactjs:clean (Thread[Execution worker for ':',5,main]) completed. Took 6.71 secs.

BUILD SUCCESSFUL in 9s
</code></pre>

<h3 id="备选gradle前端构建插件对比分析">备选Gradle前端构建插件对比分析</h3>

<h4 id="星数对比">星数对比</h4>

<p><a href="https://github.com/Siouan/frontend-gradle-plugin">Frontend Gradle plugin</a> 项目星数 3.2k；<br />
<a href="https://github.com/srs/gradle-node-plugin">Gradle Plugin for Node</a> 项目星数 824；<br />
<a href="https://github.com/Siouan/frontend-gradle-plugin">Frontend Gradle plugin</a> 胜出</p>

<h4 id="支持系统">支持系统</h4>

<p><a href="https://github.com/Siouan/frontend-gradle-plugin">Frontend Gradle plugin</a> 支持<a href="https://nodejs.org/">NodeJS</a>、<a href="https://www.npmjs.com/">Npm</a>、<a href="https://yarnpkg.com/">Yarn</a>；<br />
<a href="https://github.com/srs/gradle-node-plugin">Gradle Plugin for Node</a> 支持<a href="https://nodejs.org/">NodeJS</a>、<a href="https://www.npmjs.com/">Npm</a>、<a href="https://yarnpkg.com/">Yarn</a>、<a href="https://gruntjs.com/">Grunt</a>、<a href="https://gulpjs.com/">Gulp</a>；<br />
<a href="https://github.com/srs/gradle-node-plugin">Gradle Plugin for Node</a> 胜出</p>

<h4 id="node-npm配置">Node/Npm配置</h4>

<p><a href="https://github.com/Siouan/frontend-gradle-plugin">Frontend Gradle plugin</a> 支持NodeJS版本，支持NodeJS安装路径；<br />
<a href="https://github.com/srs/gradle-node-plugin">Gradle Plugin for Node</a> 支持NodeJS版本，支持NodeJS安装路径，支持Npm版本，支持Npm安装路径，支持node_modules安装路径；<br />
<a href="https://github.com/srs/gradle-node-plugin">Gradle Plugin for Node</a> 胜出</p>

<h4 id="总结">总结</h4>

<p><a href="https://github.com/Siouan/frontend-gradle-plugin">Frontend Gradle plugin</a>项目星数远远高于<a href="https://github.com/srs/gradle-node-plugin">Gradle Plugin for Node</a>，不过当前支持的特性却不如后者多。<br />
这两款插件都能胜任我当前的游戏要求。 所以我选择现阶段使用<a href="https://github.com/srs/gradle-node-plugin">Gradle Plugin for Node</a>，对<a href="https://github.com/Siouan/frontend-gradle-plugin">Frontend Gradle plugin</a>保持关注。</p>

<h3 id="执行webpack的其他方式">执行Webpack的其他方式</h3>

<p><a href="https://guides.gradle.org/running-webpack-with-gradle/">Running Webpack with Gradle</a>是Gradle的官方指南，它是用commandLine执行的。<br />
但是我发现这种方式有个缺陷，在Windows平台执行webpack shell命令就报错了，需要判断平台来决定使用webpack shell命令还是webpack.cmd命令。所以需要做如下修改：</p>

<pre><code>task webpack(type: Exec) { 
  if (System.getProperty(&quot;os.name&quot;).toUpperCase().contains(&quot;WINDOWS&quot;)) {
    commandLine &quot;$projectDir/node_modules/.bin/webpack.cmd&quot;, &quot;app/index.js&quot;, &quot;$buildDir/js/bundle.js&quot;
  } else {
    commandLine &quot;$projectDir/node_modules/.bin/webpack&quot;, &quot;app/index.js&quot;, &quot;$buildDir/js/bundle.js&quot;
  }    
}
</code></pre>

<h3 id="关于本项目webpack的用法的思考">关于本项目Webpack的用法的思考</h3>

<p>本项目中仅使用Webpack打包JS代码，没有对CSS文件进行打包。 因此把JS代码和CSS文件分开放置了，JS代码在main/js中，CSS文件放到main/resources/static里面了。<br />
其实可以用babel-loader对js/jsx文件进行处理，用css-loader对css文件进行处理。这样就可以把JS代码和CSS文件统一放置到一起了。</p>

<h3 id="参考">参考</h3>

<ul>
<li><a href="https://github.com/eirslett/frontend-maven-plugin">frontend-maven-plugin</a><br /></li>
<li><a href="https://spring.io/guides/tutorials/react-and-spring-data-rest/">React.js and Spring Data REST</a><br /></li>
<li><a href="https://github.com/Siouan/frontend-gradle-plugin">Frontend Gradle plugin</a><br /></li>
<li><a href="https://github.com/srs/gradle-node-plugin">Gradle Plugin for Node</a><br /></li>
<li><a href="https://guides.gradle.org/running-webpack-with-gradle/">Running Webpack with Gradle</a><br /></li>
<li><a href="https://blog.marcnuri.com/angular-spring-boot-integration-gradle/">Angular + Spring Boot integration using Gradle</a><br /></li>
<li><a href="https://docs.gradle.org/current/dsl/org.gradle.api.tasks.Exec.html">Gradle Exec Task</a><br /></li>
<li><a href="https://dzone.com/articles/integrating-java-and-npm-builds-using-gradle">Integrating Java and npm Builds Using Gradle - Groovy or Kotlin DSL</a><br /></li>
</ul>

    </div>
    <footer class="post-footer">
     <div class="post-nav">
<div style="border: 1px dashed #e0e0e0; padding: 10px 10px 10px 10px; background-color: #fffeee; background-repeat: no-repeat; background-attachment: scroll; background-position: 1% 50%; -moz-background-size: auto auto; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">
    <div>
        <p style="margin-top:0px;">
            标题：Gradle构建ReactJS前端实践
        <br />作者：<a target="_blank" href="/">mryqu</a>
        <br />声明： 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/">CC BY-NC-SA 3.0 CN</a> 许可协议。转载请注明出处！
        </p>
    </div>
</div>
<div class="clear"></div>
</div>
     
 
<div class="post-tags">     
     
    <a href="/tags/gradle" rel="tag" title="gradle">#gradle#</a>
    
    <a href="/tags/npm" rel="tag" title="npm">#npm#</a>
    
    <a href="/tags/webpack" rel="tag" title="webpack">#webpack#</a>
    
</div>



     <div class="post-nav">
    <div class="post-nav-next post-nav-item">
    
        <a href="https://mryqu.github.io/post/eslint%E5%92%8Cprettier%E5%AD%A6%E4%B9%A0/" rel="next" title="ESLint和Prettier学习">
        <i class="fa fa-chevron-left"></i> ESLint和Prettier学习
        </a>
    
    </div>

    <div class="post-nav-prev post-nav-item">
    
        <a href="https://mryqu.github.io/post/vue.js%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E8%AE%BE%E7%BD%AE/" rel="prev" title="Vue.js开发环境设置">
        Vue.js开发环境设置 <i class="fa fa-chevron-right"></i>
        </a>
    
    </div>
</div>
      
     
     
     
     



<div class="comments" id="comments">
<div id="disqus_thread"></div>
<script>


var disqus_config = function () {
this.page.url = "https://mryqu.github.io/post/gradle%E6%9E%84%E5%BB%BAreactjs%E5%89%8D%E7%AB%AF%E5%AE%9E%E8%B7%B5/";
this.page.identifier = "https://mryqu.github.io/post/gradle%E6%9E%84%E5%BB%BAreactjs%E5%89%8D%E7%AB%AF%E5%AE%9E%E8%B7%B5/";
};
(function() { 
var d = document, s = d.createElement('script');
s.src = '//mryqu.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>


    </footer>
  </article>
</section>

          </div>
        </div>
        <div class="sidebar-toggle">
  <div class="sidebar-toggle-line-wrap">
    <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
  </div>
</div>
<aside id="sidebar" class="sidebar">
  <div class="sidebar-inner"> 

  <ul class="sidebar-nav motion-element">
    <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li>
    <li class="sidebar-nav-overview" data-target="site-overview">站点概览</li>
  </ul>

    <section class="site-overview sidebar-panel ">
      <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
        src="/img/author.jpg"
        alt="" />
    <p class="site-author-name" itemprop="name"></p>
    <p class="site-description motion-element" itemprop="description"> 
        Programmer &amp; Architect</p>
</div>
      <nav class="site-state motion-element">
    <div class="site-state-item site-state-posts">
      <a href="/post/">
        <span class="site-state-item-count">714</span>
        <span class="site-state-item-name">日志</span>
      </a>
    </div>
    <div class="site-state-item site-state-categories">    
        <a href="/categories/">      
         
        <span class="site-state-item-count">45</span>
        
        <span class="site-state-item-name">分类</span>
        
        </a>
    </div>

    <div class="site-state-item site-state-tags">
        <a href="/tags/">
         
        <span class="site-state-item-count">1520</span>
        
        <span class="site-state-item-name">标签</span>
        </a>
    </div>
</nav>
      
      
<div class="links-of-author motion-element">
    
        <span class="links-of-author-item">
        <a href="https://github.com/mryqu" target="_blank" title="GitHub">
            <i class="fa fa-fw fa-github"></i>
            GitHub
        </a>
        </span>
    
        <span class="links-of-author-item">
        <a href="https://twitter.com/yandongqu" target="_blank" title="Twitter">
            <i class="fa fa-fw fa-twitter"></i>
            Twitter
        </a>
        </span>
    
        <span class="links-of-author-item">
        <a href="https://www.facebook.com/yandongqu" target="_blank" title="FB Page">
            <i class="fa fa-fw fa-facebook"></i>
            FB Page
        </a>
        </span>
    
</div>

      
      <div class="links-of-blogroll motion-element inline">
<script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=01h16xrlw6m&amp;m=0&amp;s=220&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33&amp;bv=35" async="async"></script>
</div>

    </section>
    
<section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
    <div class="post-toc">
        <div class="post-toc-content"><nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#frontend-maven-plugin-https-github-com-eirslett-frontend-maven-plugin-使用介绍"><a href="https://github.com/eirslett/frontend-maven-plugin">frontend-maven-plugin</a>使用介绍</a></li>
<li><a href="#备选gradle前端构建插件">备选Gradle前端构建插件</a></li>
<li><a href="#frontend-gradle-plugin-https-github-com-siouan-frontend-gradle-plugin-实践"><a href="https://github.com/Siouan/frontend-gradle-plugin">Frontend Gradle plugin</a>实践</a>
<ul>
<li><a href="#代码修改">代码修改</a></li>
<li><a href="#操作">操作</a></li>
</ul></li>
<li><a href="#gradle-plugin-for-node-https-github-com-srs-gradle-node-plugin-实践"><a href="https://github.com/srs/gradle-node-plugin">Gradle Plugin for Node</a>实践</a>
<ul>
<li><a href="#代码修改-1">代码修改</a></li>
<li><a href="#操作-1">操作</a></li>
</ul></li>
<li><a href="#备选gradle前端构建插件对比分析">备选Gradle前端构建插件对比分析</a>
<ul>
<li><a href="#星数对比">星数对比</a></li>
<li><a href="#支持系统">支持系统</a></li>
<li><a href="#node-npm配置">Node/Npm配置</a></li>
<li><a href="#总结">总结</a></li>
</ul></li>
<li><a href="#执行webpack的其他方式">执行Webpack的其他方式</a></li>
<li><a href="#关于本项目webpack的用法的思考">关于本项目Webpack的用法的思考</a></li>
<li><a href="#参考">参考</a></li>
</ul></li>
</ul></li>
</ul>
</nav></div>
    </div>
</section>

  </div>
</aside>

      </div>
    </main>
   
    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  <span itemprop="copyrightYear">  &copy; 
  2009 - 2020</span>
  <span class="with-love"><i class="fa fa-heart"></i></span>
  <span class="author" itemprop="copyrightHolder">Mryqu&#39;s Notes</span>
</div>
<div class="powered-by">
  Powered by - <a class="theme-link" href="http://gohugo.io" target="_blank" title="hugo" >Hugo v0.52</a>
</div>
<div class="theme-info">
  Theme by - <a class="theme-link" href="https://github.com/xtfly/hugo-theme-next" target="_blank"> NexT
  </a>
</div>


      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      <span id="scrollpercent"><span>0</span>%</span>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
<script type="text/javascript" src="/js/vendor/jquery/index.js?v=2.1.3"></script>
<script type="text/javascript" src="/js/vendor/fastclick/lib/fastclick.min.js?v=1.0.6"></script> 
<script type="text/javascript" src="/js/vendor/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
<script type="text/javascript" src="/js/vendor/velocity/velocity.min.js?v=1.2.1"></script>
<script type="text/javascript" src="/js/vendor/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/vendor/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>

<script src="/js/vendor/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>

<script type="text/javascript" src="/js/utils.js"></script>
<script type="text/javascript" src="/js/motion.js"></script>
<script type="text/javascript" src="/js/affix.js"></script>
<script type="text/javascript" src="/js/schemes/pisces.js"></script>

<script type="text/javascript" src="/js/scrollspy.js"></script>
<script type="text/javascript" src="/js/post-details.js"></script>
<script type="text/javascript" src="/js/toc.js"></script>

<script type="text/javascript" src="/js/bootstrap.js"></script>

<script type="text/javascript" src="/js/search.js"></script>
</body>
</html>