<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> 
    <title>[MapR培训笔记]Hadoop基础 - Mryqu&#39;s Notes</title>
    <meta name="keywords" content="mryqu,yandongqu,博客,程序员,架构师,笔记,技术,分享">
    
    <meta property="og:title" content="[MapR培训笔记]Hadoop基础">
    <meta property="og:site_name" content="Mryqu&#39;s Notes">
    <meta property="og:image" content="/img/author.jpg"> 
    <meta name="title" content="[MapR培训笔记]Hadoop基础 - Mryqu&#39;s Notes" />
    <meta name="description" content="mryqu | yandongqu | 博客 | 软件 | 架构 | 技术"> 
    
    <link rel="shortcut icon" href="/img/favicon.ico" />
    <link rel="apple-touch-icon" href="/img/apple-touch-icon.png" />
    <link rel="apple-touch-icon-precomposed" href="/img/apple-touch-icon.png" />
    <link href="/js/vendor/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />
    <link href="/js/vendor/fancybox/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />
    <link href="/css/main.css" rel="stylesheet" type="text/css" />
    <link href="/css/syntax.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
     fancybox: true, 
    motion: true
  };
</script>
</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
<div class="container one-collumn sidebar-position-left page-home  ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-meta  custom-logo ">

  <div class="custom-logo-site-title">
    <a href="https://mryqu.github.io/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Mryqu&#39;s Notes</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
    <ul id="menu" class="menu">
      
      
        <li class="menu-item ">
          <a href="/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="/tags/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="/categories/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-categories"></i> <br />分类
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="/post/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档
          </a>
        </li>
      
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger"> <i class="menu-item-icon fa fa-search fa-fw"></i> <br /> 搜索</a>
      </li>
    </ul>
    <div class="site-search">
      <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>

    </div>
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
<section id="posts" class="posts-expand">
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="https://mryqu.github.io/post/mapr%E5%9F%B9%E8%AE%AD%E7%AC%94%E8%AE%B0_hadoop%E5%9F%BA%E7%A1%80/" itemprop="url">
        [MapR培训笔记]Hadoop基础
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2015-11-25">
    2015-11-25
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="/categories/hadoop&#43;spark" itemprop="url" rel="index">
        <span itemprop="name">Hadoop&#43;Spark</span>
      </a>
      &nbsp; 
    </span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="/categories/hadoop" itemprop="url" rel="index">
        <span itemprop="name">Hadoop</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">388 字 ~2分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    

<h2 id="学习目标">学习目标</h2>

<ul>
<li><strong>大数据介绍</strong>: 理解大数据定义，判断是否存在大数据问题，描述如何用Hadoop解决大数据问题；</li>
<li><strong>Hadoop核心元素</strong>:描述分布式文件系统如何工作，map/reduce如何在分布式文件系统上处理数据；</li>
<li><strong>Hadoop工具生态系统</strong>: 了解Hadoop相关工具及其作用；</li>
<li><strong>解决大数据用例</strong>: 描述Hadoop生态系统如何协同解决各种大数据用例，如何在不同场景下选择工具。</li>
</ul>

<h2 id="第一课-数据如何变大">第一课 数据如何变大</h2>

<h3 id="学习目标-1">学习目标</h3>

<ul>
<li>定义大数据及大数据问题</li>
<li>描述Hadoop主要部件</li>
</ul>

<h3 id="大数据">大数据</h3>

<p>差不多是4V中的前三个,以及使数据难于描述、存储或处理的一些其他特性
- <strong>Volume（大量）</strong>:太大以至于系统无法处理
- <strong>Variety（多样）</strong>: 太多不同种类的数据，无法简单描述
- <strong>Velocity（高速）</strong>: 数据产生太快以至于系统无法处理
- <strong>Value（价值）</strong>:</p>

<h3 id="hadoop主要部件">Hadoop主要部件</h3>

<p><img src="/images/2015/11/0026uWfMgy70N1a925Ada.jpg" alt="[MapR培训笔记]Hadoop基础" /></p>

<p>Google收到大数据挑战后，认识到无法用传统关系型数据库解决，创建了GFS+BigTabel+Map/Reduce。
- GFS将文件分割成块，分布在集群的节点上。文件块在不同节点进行复制，以防止节点故障导致的数据丢失。
- BigTable是使用GFS存储和获取数据的（分布式、多级）数据库系统。BigTable使用行键、列键和时戳映射到所存储的数据，可以不重写已有数据在不同时间对相同信息进行采集。行被分片为称之为Tablet的子表，分布到集群内。BigTable被设计成可以处理大量数据，可以无需重新配置已有文件的情况下向集群添加新的节点。
- 并行处理范式map/reduce被用于处理存储在GPS上的数据。map/reduce代表处理的两个步骤。在mapping阶段，所有数据在逻辑上分割，map函数应用于所有割片以生成键值对。框架对所有来自mapper的键值对进行排序然后在reducer之间分片。在reduce阶段，reduce函数应用于所有分片。map/reduce是一种分而治之的方式，将单个庞大的作业分解成一系列小的可管理的任务。</p>

<p>Google实验多年后发表了论文阐述了他们的大数据解决方案。DougCutting以此在Yahoo开发一个项目，后来开源成Apache基金会项目下的Hadoop（Cutting儿子玩具象的名字）。
Mapr利用Hadoop理念，开发了更快、更稳定的企业版Hadoop。</p>

<h2 id="第二课-hadoop核心">第二课 Hadoop核心</h2>

<h3 id="学习目标-2">学习目标</h3>

<ul>
<li>本地&amp;分布式文件系统</li>
<li>MapR-FS中的数据管理</li>
<li>（使用命令行）执行数据管理</li>
<li>Map Reduce范式</li>
</ul>

<h3 id="本地文件系统">本地文件系统</h3>

<p>HFS/NTFS（读写）和CDFS（只读）都是本地文件系统。文件系统中每个文件都由一个iNode和一系列数据块构成。iNode存储文件元数据，例如文件类型、权限、所有者、文件名和最后一次修改时间等信息，它还存储文件所存储的数据块的指针。数据块用于存储文件的实际内容。
本地文件系统的常见问题
- 硬盘故障：本地硬盘镜像（RAID-1）
- 丢失：云镜像
- 人为失误
  - 误删：定期增量备份
  - 空间不足：增加硬盘、硬盘阵列（RAID-0）</p>

<h3 id="分布式文件系统">分布式文件系统</h3>

<p>分布式文件系统行为与RAID-0类似，但硬盘分布在多个服务器上。由Sun微系统公司开发的网络文件系统NFS仍广泛用于在网络内存储和获取数据。
分布式文件系统当处理数据时致力于透明性，即对于客户端程序来说，文件系统与本地文件系统类似，分布式文件系统不可见。由于数据在网络内多个机器内分布，分布式文件系统使用数据定位器存储数据位置信息。与本地文件系统中的iNode类似，数据定位器只想数据在分布式文件系统中存储的位置。</p>

<h3 id="mapr-fs存储">MapR-FS存储</h3>

<p>MapRFS是分布式文件系统，是Hadoop的MapR分发版的底层文件系统。它支持所有前面提到的本地文件系统特性，包括读写访问、本地或远程镜像，及在联机时对文件系统扩容的能力。此外，MapR文件系统可以加载并直接处理已有HDFS或NFS文件系统中的数据。</p>

<h3 id="物理存储">物理存储</h3>

<p>集群是一组使用分布文件系统（例如MapR-FS）的计算机。集群中每个计算机称为一个节点，每个节点有一或多个物理硬盘。
在MapR-FS中，硬盘组合成组，称为存储池（storagepool）。默认一个存储池有三块硬盘组成。当数据写往存储池，数据在三个磁盘拆分写入，增加写速度。每个节点包含一或多个存储池，所有节点上的所有存储池构成了MapR-FS上的全部可用存储。</p>

<h3 id="逻辑存储">逻辑存储</h3>

<p>MapR-FS将数据写入称之为容器（container）的逻辑单元。一个容器默认大小32GB，一个存储池通常有多个容器。容器内的数据在集群内节点间复制以防止单点故障或硬盘故障。
容器组合成卷（volume）。卷是跨集群内一组节点的数据资源逻辑抽象概念。所有容器及其副本在卷拓扑内的节点上分布。MapR-FS使用称之为容器定位数据库（CDLB）的特定服务存储容器及其副本的位置。CLDB为MapR-FS执行数据定位功能。它为数据存储在那个容器及找到集群内容器及其副本提供查找信息。
许多集群存储策略定义在卷这一级。</p>

<h3 id="定义">定义</h3>

<p>拓扑（Topology）、快照（Snapshots）、配额（Quotas）、复制（Replication）、镜像（Mirrors）、权限（Permissions）、压缩（Compression）。
- <strong>拓扑</strong>:可以配置不同的拓扑以实施某些数据存放在某些物理位置，例如机架和节点。通过这种方式，你可以设计数据来开发引用局部性以获得性能、可用性和其他适用于你的任意标准。之后可以将这些拓扑与卷进行关联。
- <strong>压缩</strong>: 卷内数据当被写入硬盘时会被自动压缩。
- <strong>镜像</strong>:可以配置策略集群内本地镜像或远程另一集群镜像。镜像对磁盘故障济公一定程度的保护，远程镜像当整个集群故障时可用于灾难恢复。
- <strong>卷快照</strong>:在维护活动卷的持续一致性的同时，员徐创建数据的时间点版本。快照对用户错误提供一定程度的保护，也可以让你在任意时间返回某个数据集版本。快照可以手工创建，也可以基于计划自动定期执行。
- <strong>配额</strong>:磁盘空间使用的上限。每个卷、用户或组都可以有一个配额。用户和组配额适用于对该用户和组所负责的所有卷的大小之和。硬配额在达到配额后会阻止写入，软配额则是发送告警邮件。
- <strong>权限</strong>: 卷级别的权限可被设置为dump、restore、modify、delete或fullcontrol。卷内的文件和目录可以有标准的UNIX权限。
- <strong>复制</strong>:包含卷内容的容器可被冗余复制。默认的复制因子为3，原始数据加上两个备份，但是每个卷都可以设置自己的复制因子。卷内所有容器具有相同的复制设置。</p>

<h3 id="汇总">汇总</h3>

<p>MapR文件系统支持POSIX语义及NFS导出。
MapR文件系统被写入到一个卷，卷是复制、镜像、快照、拓扑和使用权限等数据管理功能的一个管理抽象。
卷数据保存在容器内，卷用于定义数据位置及数据复制。
容器被写入到存储池，存储池是一个或多个物理硬盘。</p>

<h3 id="知识检查">知识检查</h3>

<p><img src="/images/2015/11/0026uWfMgy70UJrSpen3f.jpg" alt="[MapR培训笔记]Hadoop基础" />
答案<font color="#B4B4B4">D</font></p>

<h3 id="执行数据管理">执行数据管理</h3>

<p>HDFS和MapR-FS命令：
- <strong>hadoop fs -mkdir mydir</strong>: 创建新目录
- <strong>haoop fs -copyFromLocal /etc/hosts mydir</strong>:从本地文件系统复制文件到MapR-FS
- <strong>hadoop fs -lsr mydir</strong>: 递归列举目录内容
- <strong>hadoop fs -cat mydir/hosts</strong>: 显示一个文件的内容
- <strong>hadoop fs -rm mydir/h</strong>: 删除指定文件</p>

<p>MapR-FS特有命令：
- <strong>hadoop mfs -ln mydir yourdir</strong>: 在两个目录之间建立链接
- <strong>hadoop mfs -setcompression off mydir</strong>: 关闭目录下的文件压缩
- <strong>hadoop mfs -setchunksize 65536 mydir</strong>: 设置目录下文件的块大小</p>

<p>可在MapR-FS下工作的标准POSIX命令：
- <strong>mkdir</strong>: 创建目录
- <strong>cp</strong>: 复制文件
- <strong>ls</strong>: 列举目录内容
- <strong>ln</strong>: 在两个目录之间建立链接
- <strong>rm</strong>: 删除文件
- <strong>tail</strong>: 选定文件指定部分（显示或复制）
- <strong>grep和awk</strong>: 按模式搜索输入
- <strong>sed</strong>: 流式编辑文件</p>

<h3 id="map-reduce历史">Map Reduce历史</h3>

<p>map reduce过程由于Hadoop而出名，但是它不是一个新概念，早在70年代的Lisp编程就可以看到。
<img src="/images/2015/11/0026uWfMzy70YsntGsj8b.jpg" alt="[MapR培训笔记]Hadoop基础" />
Google使用map reduce以各种方式增强web搜索经验，例如用于帮助索引网页内容以及PageRank算法。
<img src="/images/2015/11/0026uWfMzy70YtKI3p903.jpg" alt="[MapR培训笔记]Hadoop基础" /></p>

<h3 id="map-reduce过程">Map Reduce过程</h3>

<p><img src="/images/2015/11/0026uWfMzy70Yu6tSoI8c.png" alt="[MapR培训笔记]Hadoop基础" /></p>

<p>MapReduce过程有三个阶段：map、shuffle和reduce。
map阶段输入在TaskTracker节点中分割，任务被分配给数据所在的节点。map阶段的节点基于输入中的记录发出键值对。
shuffle阶段由Hadoop框架处理，mapper的输出被分片发往reducer。
在reducer阶段，每个reducer接受一个或多个分片，读取键并遍历与键关联的值列表。Reducer基于应用逻辑返回零或多个键值对。</p>

<p>word count算法示例：
<img src="/images/2015/11/0026uWfMzy70YuaHid4fa.jpg" alt="[MapR培训笔记]Hadoop基础" /></p>

<h2 id="第三课-hadoop生态系统">第三课 Hadoop生态系统</h2>

<h3 id="学习目标-3">学习目标</h3>

<ul>
<li><strong>Flume</strong>: 将流数据收集到集群的工具</li>
<li><strong>Sqoop</strong>: 在外部数据存储（RDBMS、NoSQL）和Hadoop集群之间传输数据的工具</li>
<li><strong>Hbase</strong>: Hadoop上的表数据库</li>
<li><strong>Hive</strong>: 对Hadoop集群上存储的数据进行SQL相似的查询</li>
<li><strong>Oozie</strong>: Hadoop任务管理</li>
<li><strong>Pig</strong>: 分析非结构化数据的数据流脚本语言</li>
<li><strong>Mahout</strong>: 使用Hadoop进行机器学习</li>
<li><strong>Drill</strong>: 用于结构化、半结构化和嵌套数据的低延迟查询引擎</li>
<li><strong>Spark</strong>: 用于集群计算的数据处理引擎</li>
</ul>

<h3 id="hadoop生态系统">Hadoop生态系统</h3>

<p><img src="/images/2015/11/0026uWfMgy6Y7Tkt7mnbf.jpg" alt="[MapR培训笔记]Hadoop基础" />
Hadoop的两个核心要素，map-r文件系统和map-reduce，用于存储和处理数据，但是这仅是Hadoop成为平台的开端。
进入的数据是各种结构化和非结构化的格式，Hadoop能用于处理许多不同数据源的数据。为了处理不同数据源，几个应用被开发出来将不同类型的数据收集到Hadoop分布式文件系统。除了map-reduce作为Hadoop中最初的处理范式，各种额外的分析和处理工具被开发出来增加Hadoop的使用范围。最后，各种工具被开发出来对Hadoop分布式处理的结果进行可视化、再挖掘或进行其他处理。
所有的这些城区一起构成了Hadoop生态系统。当学习Hadoop生态系统后，你会注意到一些工具提供类似的功能，其中一些甚至替代核心功能。Hadoop生态系统的一个优点就是允许用户选择最适合自己需求的工具。</p>

<h3 id="flume">Flume</h3>

<p><img src="/images/2015/11/0026uWfMzy70YUvCO1ue4.jpg" alt="[MapR培训笔记]Hadoop基础" />
Flume是一个可靠的、可伸缩的服务，可用于将流数据收集到Hadoop集群。Flume作为一个代理执行，包括三个关键元素：
- 源：从系统日志、web服务器日志、Facebook数据或Twitter订阅等外部源消费事件
- 通道：临时保留流事件
- 目的：从通道删除事件并发送到外部仓库，例如MapR-FS集群。</p>

<p>处理流可被用作单过程，将数据从单个流源取到集群内。大多数对Flume的使用以更复杂的配置使用这些元素的某些组合。常见的用例为多跳、扇入和复用。
<img src="/images/2015/11/0026uWfMzy70Z4vuYa521.png" alt="[MapR培训笔记]Hadoop基础" />
- <strong>多跳（Multi-hop）</strong>:在多跳用例中，多个源-通道-目的配置连接成一系列，第一个流的目的成为第一个流的源，直到整个流结束。
- <strong>扇入（Fan-in）：在扇入用例中，多个流数据源合并成一个源。</strong>:
- <strong>复用（Multiplex）：在复用用例中，输入数据根据用户输入被送往不同的通道，之后发往不同的仓库或同一仓库的不同分区。</strong>:</p>

<p>无需写与数据源API通信的特定脚本，Flume可以从不同的数据源收集数据，并发往多个仓库。此外，Flume可以配置为在导入数据的同时识别错误并进行反应，使你无需自己实现错误逻辑。</p>

<h3 id="sqoop">Sqoop</h3>

<p><img src="/images/2015/11/0026uWfMzy70Z5FwzNxbb.jpg" alt="[MapR培训笔记]Hadoop基础" />
Sqoop是一个在外部数据存储和Hadoop集群之间传输数据的工具。Sqoop是一个命令行工具，可用于RDBMS和NoSQL数据。
可以任何客户端运行sqoop，包括你的笔记本。Sqoop将只调用仅含map的MapReduce作业在外部数据存储和Hadoop集群之间传输数据。使用MapReduce对处理提供了并行和容错能力，在集群上的数据可被存储在MapR-FS、Hive表、或HBase表。
Sqoop可在Hadoop集群和外部数据存储之间执行一个表或多个表的导入/导出。，也可以用作执行增量导入或导出，即发生变化的数据会被传输。这些选项通常一起使用，先执行批量导入/导出，然后在此基础上执行增量导入/导出。</p>

<h3 id="hbase">HBase</h3>

<p>Apache HBase是一个开源、分布式、版本化的非关系数据库。HBase被设计成处理大量不一致的数据，尤其适合：
- 从系统度量或用户点击等数据源中收集上百万甚至上亿行和列有价值的数据
- 存储聊天或邮件等列之间有不一致值的稀疏数据
- 连续捕获数据并需要随机读写访问，例如web应用的后端或搜索索引<img src="/images/2015/11/0026uWfMzy70ZdS9rC35b.png" alt="[MapR培训笔记]Hadoop基础" /></p>

<p>HBase由三类服务器组成，以主从架构创建，但所有服务器一起工作提供表的存储和查找服务。
- RegionServer为读写的数据服务。RegionServer与MapR-FS数据节点搭配，这使得ReginServer服务的数据具有数据本地性。
- Master server负责监控集群内所有RegionServer的健康情况，并为数据定位提供元数据服务。
- HBase客户请求数据的一个子集，定位服务所关注行的RegionServer。客户端直接向RegionServer发送读/写请求，不会访问Masterserver来服务请求。
- Zookeeper服务协调场景内的全部服务器。Zookeeper是集中式服务，为所有服务器维护配置信息、命名、分布式同步、心跳和组服务。</p>

<h3 id="hive">Hive</h3>

<p><img src="/images/2015/11/0026uWfMzy70ZsdcEFAe2.jpg" alt="[MapR培训笔记]Hadoop基础" />
Hive是构建于Hadoop之上的数据仓库基础架构，使用MapReduce提供SQL相似语法进行查询。HiveQL语言提供与SQL机构类似的一系列操作，用于转化成MapReduce程序来产生所期望的查询结果。对Hadoop的访问更加简单，Hive查询可以各种方式提交，包括通过CLI、REST之类的web接口，以及通过ODBC或JDBC。
Hive的核心是驱动。当查询提交给Hive，驱动负责执行查询并返回接口。驱动解析查询并转化为一或多个mapreduce作业。对于查询中每个复杂自居，例如JOIN或过滤，额外的mapreduce作业将串行执行，第一个mapreduce作业的结果导入第二个作业，以此类推。因此，Hive适合对非常大或复杂的完全数据集进行查询，其中mapreduce可以利用并行处理和容错能力。</p>

<h3 id="oozie">Oozie</h3>

<p><img src="/images/2015/11/0026uWfMzy70ZsiCiRP01.jpg" alt="[MapR培训笔记]Hadoop基础" />
OOzie是用于创建复杂Hadoop工作流的可伸缩、可扩展的调度程序系统。Oozie可用于管理工作流内多种类型的作业，包括MapReduce、Pig、Hive、Sqoop、distcp以及任意脚本和Java程序。
Hadoop工作流一般分厂复杂，包括以串行、并行方式运行的多个应用程序。Oozie中的工作流以有向无环图（directeda-cyclic graph，DAG）的形式表现。
<img src="/images/2015/11/0026uWfMzy70Zspumad31.jpg" alt="[MapR培训笔记]Hadoop基础" />
当在Oozie内创建工作流，客户端可以使用CLI、Java API或RESTAPI之类的web服务编写并编码到一个XML文件。客户端之后向Oozie服务器提交工作流。OOzie服务器联系Hadoop集群内适当的端点以在适当的时间启动每一部分作业。
使用Oozie管理复杂工作流细节，Hadoop应用开发人员无需人工查看作业就可以提交一系列作业，并在转到下一步之前做决定。除了复杂的工作流，Oozie可以显著减少时间相关、定时执行或需要等待数据采集的作业的人工投入量</p>

<h3 id="pig">Pig</h3>

<p><img src="/images/2015/11/0026uWfMty71tHP90XAb6.png" alt="[MapR培训笔记]Hadoop基础" />
Pig是一个分析数据的平台。Pig由称之为“PigLatin”的数据流脚本语言及将这些脚本转化成一些列MapReduce程序的基础设施组成。通过使用MapReduce，PigLatin脚本可用于Hadoop平台对大而复杂的数据集执行转换。
Pig的一个常见用途是数据流水线。例如，你想要从web服务器向数据仓库导入日志。使用Pig，你可以从多个服务器加载日志文件，对一或多个文件实行过滤。可以将这些源连接（JOIN）到一起，在最终排序到期望位置之前执行其他转换。对PigLatin中执行数据转换的每一行代码，一个新的MapReduce程序将被创建用于执行转换。
<img src="/images/2015/11/0026uWfMty71tHUHIeda9.jpg" alt="[MapR培训笔记]Hadoop基础" />
Pig也常用于对非结构化数据的即席（adhoc）查询，无需使用模式（schema）。Pig通过用户定义函数实现高度可扩展，这些函数可以用Java、Python、JavaScript、Ruby或Groovy编写。为了查询和转换非常大的、复杂的或非结构化的数据集，Pig提供了一个非常简单的平台来访问MapReduce的平行和容错功能。</p>

<h3 id="mahout">Mahout</h3>

<p><img src="/images/2015/11/0026uWfMty71tI1lTzP31.jpg" alt="[MapR培训笔记]Hadoop基础" />
Mahout是一套可扩展机器学习库。它包含一套核心算法，支持数据聚类（clustering，基于相似的主题收集新的数据项）、分类（classification或categorization，创建一套标签，将新文章打上最适合的标签）或协同过滤（collaborativefiltering，通常指推荐系统）。Mahout也支持底层矩阵数学库，以支持自有算法。Mahout传统使用次序算法和MapReduce算法，但是对ApacheSpark和H20（原名oxdata）的支持已经加入Mahout。
<img src="/images/2015/11/0026uWfMty71tIiycMl35.jpg" alt="[MapR培训笔记]Hadoop基础" />
推荐系统引擎工作在装满用户（user）、物品（item）及用户对物品的评分（rating）的数据库上。例如，我们想基于具有类似排名历史的其他用户所购买的物品向一个用户推荐一个新物品。当我们的服务准备好一个新的推荐，首先将用户、物品和评分数据加载并存储到DataModel。
一旦具有自己的DataModel，我们需要定义如何比较我们的用户。首先我们需要提供一个UserSimilarity模型。Mahout具有多个UserSimilarity选项使用不同的度量来比较用户。我们可以选择最适合我们要比较数据的相似性度量。
下一步我们定义UserNeighborhood，这是用于比较的相似用户范围。例如，UserNeighborhood为5将给推荐引擎与所分析用户最相似的5个用户。推荐系统运行所选择的UserSimilarity模型通过DataModel查看每个用户对每个物品的评分。对于我们想要推荐新物品的用户，它会选出5个最接近的用户。这些用户评分醉方的物品将会推荐给我们的用户。
推荐引擎能获得非常复杂的结果、以多种方式过滤推荐物品，可离线执行计算。</p>

<h3 id="drill">Drill</h3>

<p><img src="/images/2015/11/0026uWfMty71tIpRxD826.png" alt="[MapR培训笔记]Hadoop基础" />
Drill是用于大数据探索的查询引擎。在提供工业标准ANSISQL熟悉感和生态系统的同时，Drill从一开始就设计成支持半结构化数据高性能分析，可以快速处理现代大数据应用产生的数据。Drill能对文件中的自描述数据，例如JSON、Parquet、文本，以及MapR-DB和HBase表，执行动态查询，无需请求Hive元数据存储中的元数据定义。Drill通过对所有Hive文件格式和HiveUDF的支持，可以在Hive表和视图上执行查询。
Drill中的核心元素是Drillbit。Drillbit是一个守护进程服务，可以安装在集群的所有节点上，任意一个Drillbit能偶接收并处理查询请求。
当一个Drill查询请求到达集群，它被传给某一节点上的drillbit。该drillbit变成了驱动drillbit，负责管理解析查询，为快速有效执行生成优化后的分布式查询计划。驱动drillbit从ZooKeeper获得集群内有效drillbit节点列表，为最大数据本地化选择执行各种查询片段的合适节点。驱动drillbit根据执行计划，在单个节点上调度查询片段的执行。单个节点执行完查询片段后将数据返回给驱动drillbit，然后由驱动drillbit返回给客户端。
drill对数据源支持的灵活性使其可以足够有效，可为在多个数据仓库上执行合并查询（consolidatingquery）或探索未知数据仅使用drill一个工具就能执行所有查询。</p>

<h3 id="spark">Spark</h3>

<p><img src="/images/2015/11/0026uWfMty71tICDLkA20.jpg" alt="[MapR培训笔记]Hadoop基础" />
Spark是在例如Hadoop之类的分布式计算集群上执行通用数据分析的框架。Spark提供了内存内计算，极大增强了MapReduce之上的数据处理速度。Spark运行在已有Hadoop集群之上，可以访问存储在MapR-FS之类的分布式文件系统或Hbase中的Hadoop数据。
Spark也可以通过Spark SQL进行直接Hive查询处理Hive中的结构化数据，可以通过SparkStraming处理HDFS、Flume、Kafka、Twitter或自定义数据源上的流数据。
Spark应用可用Java、Scala或Python编写，这让Spark便于用于数据分析。
<img src="/images/2015/11/0026uWfMty71tIOtiF7b5.jpg" alt="[MapR培训笔记]Hadoop基础" />
Spark在用于迭代作业时能特别有效地优化结果，即对相同数据集执行多次机器学习算法。在这种情况下，Spark将数据装载为内存中只读的对象弹性分布式数据集（resilientdistributeddataset，RDD）。在RDD中的数据在集群内节点上分片。如果分片丢失，它可以在内存内重建，提供与Hadoop共同的容错能力。
在机器学习算法的第一个迭代内，Spark和MapReduce具有相似的速度。然而，MapReduce需要从磁盘重新加载数据并为每个迭代启动一个新的作业，而RDD能够缓存在内存中重复使用无需重新加载数据，这使得处理速度显著增加。
通过Spark应用开发的灵活性，RDD的速度和容错能力，流数据、图计算和机器学习的内建库支持，Spark为下一代并行处理分析提供了一个易于使用的平台。</p>

<h2 id="第四课-用例">第四课 用例</h2>

<h3 id="学习目标-4">学习目标</h3>

<ul>
<li>数据仓库优化</li>
<li>大规模日志分析</li>
<li>创建一个推荐引擎</li>
</ul>

<h3 id="hadoop生态系统回顾">Hadoop生态系统回顾</h3>

<p>在第三课里，我们介绍了Hadoop生态系统里的几个部分。这里我们将它们归为如下几类，数据源、数据获取（Ingestion）、数据处理和数据处理结果使用。除了归类，这些话题也组成了经典的Hadoop工作流：
- 我们拥有某种或多种数据需要进行信息探究
- 该数据可以使用一种或多种生态系统组件获取并存入Hadoop集群
- 之后使用一种或多种生态系统组件处理数据
- 这些数据处理结果可被我们的组织查看和使用，并可能被再次处理用于进一步研究</p>

<h4 id="数据源">数据源</h4>

<p>大数据始于数据源，可能是传统结构化数据或新的复杂类型数据，Hadoop对所有数据源提供了单个仓库。
- SQL - 结构化查询语言SQL是用于查询和转换存储在关系型数据库管理系统中的数据。
- NoSQL - NoSQL是无需以表格格式存储的数据模型统称。通常，NoSQL指扁平或嵌套格式的数据。
- 日志数据 - 计算机系统日志抓取了各种各样关于组织内部系统、外部客户交互的信息及其使用方式。
- 流数据 -很多基于web源的流数据，例如Twitter订阅、Facebook帖子、web点击或表单数据都是流数据示例。</p>

<h4 id="数据获取">数据获取</h4>

<p>为了处理多种数据源，几种应用被开发用于获取不同类型数据到Hadoop分布式文件系统。
- Flume - Flume是一个可靠的、可伸缩的将流数据收集到Hadoop集群的服务。
- Sqoop -Sqoop是一个在外部数据存储和Hadoop集群之间传输数据的工具。Sqoop是对RDBMS和NoSQL数据都可使用的一个命令行工具。
- NFS - 网络文件系统是一种分布式文件系统协议，使得计算访问网络之间的文件如同本地挂载存储一般。
- Kafka - Kafka是一个快速、可伸缩的开源消息服务，将日志数据分发到集群内。</p>

<h4 id="数据处理">数据处理</h4>

<p>除了map-reduce作为最初的Hadoop处理范式，很多其他分析和处理工具被开发出来用于其他Hadoop使用。
- MapReduce - Map reduce是多步处理，将大数据分块，然后对每块执行函数生成最终结果。
- Spark -Spark是在Hadoop等分布式计算集群上执行通用数据分析的框架。Spark提供内存内计算，并加大提高了MapReduce上数据处理速度。
- Drill -Drill是用于大数据探索的查询引擎。Drill能对文件中的自描述数据，例如JSON、Parquet、文本，以及MapR-DB和HBase表，执行动态查询，无需请求Hive元数据存储中的元数据定义。
- Pig- Pig是一个分析数据的平台。Pig由称之为“PigLatin”的数据流脚本语言及将这些脚本转化成一些列MapReduce程序的基础设施组成。
- Mahout -Mahout是一套可扩展机器学习库。它包含一套核心算法，支持数据聚类、分类或协同过滤（通常指推荐系统）。
- Oozie -OOzie是用于创建复杂Hadoop工作流的可伸缩、可扩展的调度程序系统。Oozie可用于管理工作流内多种类型的作业，包括MapReduce、Pig、Hive、Sqoop、distcp以及任意脚本和Java程序。
- Hive-Hive是构建于Hadoop之上的数据仓库基础架构，使用MapReduce提供SQL相似语法进行查询。HiveQL语言提供与SQL机构类似的一系列操作，用于转化成MapReduce程序来产生所期望的查询结果。
- HBase - HBase是Hadoop NoSQL数据库，对大量数据提供随机、实时读写访问。
- Elasticsearch -Elasticsearch是构建在Lucene之上的可伸缩搜索服务器，提供实时或近实时搜索。
- Solr- Solr是开源搜索平台，是Apache Lucene项目的一部分。</p>

<h4 id="使用结果">使用结果</h4>

<p>各种工具被开发用来可视化、再挖掘或使用Hadoop分布式处理的结果。
- 数据仓库 -数据仓库适用于数据的集中式仓库。它存储的数据通常来自多个数据源，例如市场、财务和人力资源等内部操作系统数据，或web网站或外部数据源的数据。
- Kibana -Kibana是用于搜索和数据分析的基于浏览器的仪表盘。Kibana由HTML和JavaScript构建，易于仅在一个web服务器上搭建和使用。
- Banana - Banana基于Kibana，用于为存储在Solr内的可视化数据创建仪表板。
- SiLK -SiLK是基于Lucene的Solr搜索平台的接口。SiLK提供用于执行搜索并对仪表盘和报告内数据进行可视化。
- Web层 - Web网站经常向客户直接传递大数据处理结果，例如基于客户之前听过的歌曲推荐新歌。</p>

<h3 id="数据仓库优化">数据仓库优化</h3>

<p><img src="/images/2015/11/0026uWfMty71tPdRTns12.jpg" alt="[MapR培训笔记]Hadoop基础" /></p>

    </div>
    <footer class="post-footer">
     <div class="post-nav">
<div style="border: 1px dashed #e0e0e0; padding: 10px 10px 10px 10px; background-color: #fffeee; background-repeat: no-repeat; background-attachment: scroll; background-position: 1% 50%; -moz-background-size: auto auto; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">
    <div>
        <p style="margin-top:0px;">
            标题：[MapR培训笔记]Hadoop基础
        <br />作者：<a target="_blank" href="/">mryqu</a>
        <br />声明： 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/">CC BY-NC-SA 3.0 CN</a> 许可协议。转载请注明出处！
        </p>
    </div>
</div>
<div class="clear"></div>
</div>
     
 
<div class="post-tags">     
     
    <a href="/tags/hadoop" rel="tag" title="hadoop">#hadoop#</a>
    
    <a href="/tags/mapr-fs" rel="tag" title="mapr-fs">#mapr-fs#</a>
    
</div>



     <div class="post-nav">
    <div class="post-nav-next post-nav-item">
    
        <a href="https://mryqu.github.io/post/hadoop_yarn%E4%B8%ADapplication_manager%E5%92%8Capplication_master%E5%8C%BA%E5%88%AB/" rel="next" title="[Hadoop] YARN中Application Manager和Application Master区别">
        <i class="fa fa-chevron-left"></i> [Hadoop] YARN中Application Manager和Application Master区别
        </a>
    
    </div>

    <div class="post-nav-prev post-nav-item">
    
        <a href="https://mryqu.github.io/post/openui5_%E6%8E%A7%E4%BB%B6%E7%9A%84propertyaggregation%E5%92%8Cassociation%E5%A6%82%E4%BD%95%E8%87%AA%E5%8A%A8%E5%85%B7%E6%9C%89%E7%9A%84getter%E5%92%8Csetter/" rel="prev" title="[OpenUI5] 控件的Property、Aggregation和Association如何自动具有的Getter和Setter？">
        [OpenUI5] 控件的Property、Aggregation和Association如何自动具有的Getter和Setter？ <i class="fa fa-chevron-right"></i>
        </a>
    
    </div>
</div>
      
     
     
     
     



<div class="comments" id="comments">
<div id="disqus_thread"></div>
<script>


var disqus_config = function () {
this.page.url = "https://mryqu.github.io/post/mapr%E5%9F%B9%E8%AE%AD%E7%AC%94%E8%AE%B0_hadoop%E5%9F%BA%E7%A1%80/";
this.page.identifier = "https://mryqu.github.io/post/mapr%E5%9F%B9%E8%AE%AD%E7%AC%94%E8%AE%B0_hadoop%E5%9F%BA%E7%A1%80/";
};
(function() { 
var d = document, s = d.createElement('script');
s.src = '//mryqu.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>


    </footer>
  </article>
</section>

          </div>
        </div>
        <div class="sidebar-toggle">
  <div class="sidebar-toggle-line-wrap">
    <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
  </div>
</div>
<aside id="sidebar" class="sidebar">
  <div class="sidebar-inner"> 

  <ul class="sidebar-nav motion-element">
    <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li>
    <li class="sidebar-nav-overview" data-target="site-overview">站点概览</li>
  </ul>

    <section class="site-overview sidebar-panel ">
      <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
        src="/img/author.jpg"
        alt="" />
    <p class="site-author-name" itemprop="name"></p>
    <p class="site-description motion-element" itemprop="description"> 
        Programmer &amp; Architect</p>
</div>
      <nav class="site-state motion-element">
    <div class="site-state-item site-state-posts">
      <a href="/post/">
        <span class="site-state-item-count">712</span>
        <span class="site-state-item-name">日志</span>
      </a>
    </div>
    <div class="site-state-item site-state-categories">    
        <a href="/categories/">      
         
        <span class="site-state-item-count">45</span>
        
        <span class="site-state-item-name">分类</span>
        
        </a>
    </div>

    <div class="site-state-item site-state-tags">
        <a href="/tags/">
         
        <span class="site-state-item-count">1515</span>
        
        <span class="site-state-item-name">标签</span>
        </a>
    </div>
</nav>
      
      
<div class="links-of-author motion-element">
    
        <span class="links-of-author-item">
        <a href="https://github.com/mryqu" target="_blank" title="GitHub">
            <i class="fa fa-fw fa-github"></i>
            GitHub
        </a>
        </span>
    
        <span class="links-of-author-item">
        <a href="https://twitter.com/yandongqu" target="_blank" title="Twitter">
            <i class="fa fa-fw fa-twitter"></i>
            Twitter
        </a>
        </span>
    
        <span class="links-of-author-item">
        <a href="https://www.facebook.com/yandongqu" target="_blank" title="FB Page">
            <i class="fa fa-fw fa-facebook"></i>
            FB Page
        </a>
        </span>
    
</div>

      
      <div class="links-of-blogroll motion-element inline">
<script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=01h16xrlw6m&amp;m=0&amp;s=220&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33&amp;bv=35" async="async"></script>
</div>

    </section>
    
<section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
    <div class="post-toc">
        <div class="post-toc-content"><nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#学习目标">学习目标</a></li>
<li><a href="#第一课-数据如何变大">第一课 数据如何变大</a>
<ul>
<li><a href="#学习目标-1">学习目标</a></li>
<li><a href="#大数据">大数据</a></li>
<li><a href="#hadoop主要部件">Hadoop主要部件</a></li>
</ul></li>
<li><a href="#第二课-hadoop核心">第二课 Hadoop核心</a>
<ul>
<li><a href="#学习目标-2">学习目标</a></li>
<li><a href="#本地文件系统">本地文件系统</a></li>
<li><a href="#分布式文件系统">分布式文件系统</a></li>
<li><a href="#mapr-fs存储">MapR-FS存储</a></li>
<li><a href="#物理存储">物理存储</a></li>
<li><a href="#逻辑存储">逻辑存储</a></li>
<li><a href="#定义">定义</a></li>
<li><a href="#汇总">汇总</a></li>
<li><a href="#知识检查">知识检查</a></li>
<li><a href="#执行数据管理">执行数据管理</a></li>
<li><a href="#map-reduce历史">Map Reduce历史</a></li>
<li><a href="#map-reduce过程">Map Reduce过程</a></li>
</ul></li>
<li><a href="#第三课-hadoop生态系统">第三课 Hadoop生态系统</a>
<ul>
<li><a href="#学习目标-3">学习目标</a></li>
<li><a href="#hadoop生态系统">Hadoop生态系统</a></li>
<li><a href="#flume">Flume</a></li>
<li><a href="#sqoop">Sqoop</a></li>
<li><a href="#hbase">HBase</a></li>
<li><a href="#hive">Hive</a></li>
<li><a href="#oozie">Oozie</a></li>
<li><a href="#pig">Pig</a></li>
<li><a href="#mahout">Mahout</a></li>
<li><a href="#drill">Drill</a></li>
<li><a href="#spark">Spark</a></li>
</ul></li>
<li><a href="#第四课-用例">第四课 用例</a>
<ul>
<li><a href="#学习目标-4">学习目标</a></li>
<li><a href="#hadoop生态系统回顾">Hadoop生态系统回顾</a>
<ul>
<li><a href="#数据源">数据源</a></li>
<li><a href="#数据获取">数据获取</a></li>
<li><a href="#数据处理">数据处理</a></li>
<li><a href="#使用结果">使用结果</a></li>
</ul></li>
<li><a href="#数据仓库优化">数据仓库优化</a></li>
</ul></li>
</ul></li>
</ul>
</nav></div>
    </div>
</section>

  </div>
</aside>

      </div>
    </main>
   
    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  <span itemprop="copyrightYear">  &copy; 
  2009 - 2020</span>
  <span class="with-love"><i class="fa fa-heart"></i></span>
  <span class="author" itemprop="copyrightHolder">Mryqu&#39;s Notes</span>
</div>
<div class="powered-by">
  Powered by - <a class="theme-link" href="http://gohugo.io" target="_blank" title="hugo" >Hugo v0.52</a>
</div>
<div class="theme-info">
  Theme by - <a class="theme-link" href="https://github.com/xtfly/hugo-theme-next" target="_blank"> NexT
  </a>
</div>


      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      <span id="scrollpercent"><span>0</span>%</span>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
<script type="text/javascript" src="/js/vendor/jquery/index.js?v=2.1.3"></script>
<script type="text/javascript" src="/js/vendor/fastclick/lib/fastclick.min.js?v=1.0.6"></script> 
<script type="text/javascript" src="/js/vendor/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
<script type="text/javascript" src="/js/vendor/velocity/velocity.min.js?v=1.2.1"></script>
<script type="text/javascript" src="/js/vendor/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/vendor/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>

<script src="/js/vendor/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>

<script type="text/javascript" src="/js/utils.js"></script>
<script type="text/javascript" src="/js/motion.js"></script>
<script type="text/javascript" src="/js/affix.js"></script>
<script type="text/javascript" src="/js/schemes/pisces.js"></script>

<script type="text/javascript" src="/js/scrollspy.js"></script>
<script type="text/javascript" src="/js/post-details.js"></script>
<script type="text/javascript" src="/js/toc.js"></script>

<script type="text/javascript" src="/js/bootstrap.js"></script>

<script type="text/javascript" src="/js/search.js"></script>
</body>
</html>